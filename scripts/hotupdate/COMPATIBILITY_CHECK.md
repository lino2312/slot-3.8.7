# å…¼å®¹æ€§æ£€æŸ¥æŠ¥å‘Š

## âœ… å…¼å®¹æ€§æ£€æŸ¥ç»“æœ

### 1. çƒ­æ›´æ–°è„šæœ¬å…¼å®¹æ€§

#### âœ… generate-manifest.js
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **ä¾èµ–**: ä»…ä¾èµ– `read-config.js` è¯»å–ç‰ˆæœ¬å·
- **è·¯å¾„**: ä½¿ç”¨ `--source` å‚æ•°æŒ‡å®šæºç›®å½•ï¼Œä¸ä¾èµ–å›ºå®šè·¯å¾„
- **ç»“è®º**: æ— éœ€ä¿®æ”¹

#### âœ… package-zip.js
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **ä¾èµ–**: æ— å¤–éƒ¨ä¾èµ–
- **è·¯å¾„**: ä½¿ç”¨ `--source` å‚æ•°æŒ‡å®šæºç›®å½•
- **ç»“è®º**: æ— éœ€ä¿®æ”¹

#### âœ… build-hotupdate.js
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **ä¾èµ–**: ä¾èµ– `generate-manifest.js` å’Œ `package-zip.js`
- **è·¯å¾„**: ä½¿ç”¨ `--source` å‚æ•°æŒ‡å®šæºç›®å½•
- **ç»“è®º**: æ— éœ€ä¿®æ”¹

#### âœ… build-all-bundles.js
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **ä¾èµ–**: ä¾èµ– `build-hotupdate.js` å’Œ `read-config.js`
- **è·¯å¾„**: ä½¿ç”¨ `--source` å‚æ•°æŒ‡å®šæºç›®å½•
- **ç»“è®º**: æ— éœ€ä¿®æ”¹

#### âœ… verify-update.js
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **ä¾èµ–**: æ— å¤–éƒ¨ä¾èµ–
- **ç»“è®º**: æ— éœ€ä¿®æ”¹

#### âœ… clean-cache.js
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **ä¾èµ–**: æ— å¤–éƒ¨ä¾èµ–
- **ç»“è®º**: æ— éœ€ä¿®æ”¹

### 2. æ„å»ºè„šæœ¬å…¼å®¹æ€§

#### âœ… build/android.js
- **çŠ¶æ€**: âœ… å…¼å®¹
- **è¾“å‡ºè·¯å¾„**: `build/{outputName}/` (ä¾‹å¦‚: `build/android-test/`)
- **assets è·¯å¾„**: `build/{outputName}/assets/`
- **å…¼å®¹æ€§**: çƒ­æ›´æ–°è„šæœ¬ä½¿ç”¨ `--source` å‚æ•°ï¼Œå¯ä»¥æŒ‡å‘æ–°çš„è·¯å¾„

#### âœ… build/apk.js
- **çŠ¶æ€**: âœ… å…¼å®¹
- **ä¾èµ–**: ä¾èµ–å·²æ„å»ºçš„é¡¹ç›®ï¼ˆä» `build/{outputName}/proj`ï¼‰
- **å…¼å®¹æ€§**: ä¸çƒ­æ›´æ–°æµç¨‹ç‹¬ç«‹ï¼Œä¸å½±å“çƒ­æ›´æ–°

#### âœ… post/android.js
- **çŠ¶æ€**: âœ… å…¼å®¹
- **åŠŸèƒ½**: åå¤„ç†ï¼ˆå›¾æ ‡ã€åŒ…åã€åº”ç”¨åç­‰ï¼‰
- **å…¼å®¹æ€§**: ä¸å½±å“çƒ­æ›´æ–°æµç¨‹

### 3. é…ç½®è¯»å–å…¼å®¹æ€§

#### âœ… ç‰ˆæœ¬å·è¯»å–
- **çƒ­æ›´æ–°è„šæœ¬**: ä½¿ç”¨ `read-config.js` çš„ `readHotUpdateVersion()`
- **æ„å»ºè„šæœ¬**: ä½¿ç”¨ `lib/config.js` çš„ `readHotUpdateVersion()`
- **çŠ¶æ€**: âš ï¸ éœ€è¦ç»Ÿä¸€

#### âœ… æ¸ é“è¯»å–
- **çƒ­æ›´æ–°è„šæœ¬**: ä¸ç›´æ¥è¯»å–æ¸ é“ï¼ˆé€šè¿‡ `--source` å‚æ•°æŒ‡å®šè·¯å¾„ï¼‰
- **æ„å»ºè„šæœ¬**: ä½¿ç”¨ `read-config.js` çš„ `readGameChannel()`
- **çŠ¶æ€**: âœ… å…¼å®¹

### 4. è·¯å¾„å…¼å®¹æ€§

#### æ—§æ¶æ„è·¯å¾„
```
build/android/assets/          # æ—§è·¯å¾„
```

#### æ–°æ¶æ„è·¯å¾„
```
build/{outputName}/assets/     # æ–°è·¯å¾„ï¼ˆä¾‹å¦‚: build/android-test/assets/ï¼‰
```

#### å…¼å®¹æ€§åˆ†æ
- âœ… **å®Œå…¨å…¼å®¹**: çƒ­æ›´æ–°è„šæœ¬ä½¿ç”¨ `--source` å‚æ•°ï¼Œå¯ä»¥æŒ‡å‘ä»»æ„è·¯å¾„
- âœ… **ä½¿ç”¨æ–¹å¼**: 
  ```bash
  # æ—§æ–¹å¼ï¼ˆä»ç„¶å¯ç”¨ï¼‰
  node scripts/hotupdate/build-all-bundles.js --source build/android/assets
  
  # æ–°æ–¹å¼ï¼ˆæ¨èï¼‰
  node scripts/hotupdate/build-all-bundles.js --source build/android-test/assets
  ```

## ğŸ”§ éœ€è¦ä¿®å¤çš„é—®é¢˜

### é—®é¢˜1: ç‰ˆæœ¬å·è¯»å–å‡½æ•°é‡å¤

**é—®é¢˜**: 
- `read-config.js` ä¸­æœ‰ `readHotUpdateVersion()`
- `lib/config.js` ä¸­ä¹Ÿæœ‰ `readHotUpdateVersion()`

**å½±å“**: å¯èƒ½å¯¼è‡´ä¸ä¸€è‡´

**å»ºè®®**: ç»Ÿä¸€ä½¿ç”¨ `read-config.js` ä¸­çš„å‡½æ•°

### é—®é¢˜2: æ–‡æ¡£éœ€è¦æ›´æ–°

**é—®é¢˜**: 
- `BUILD_WORKFLOW.md` ä¸­å¼•ç”¨äº†æ—§çš„è„šæœ¬è·¯å¾„
- éœ€è¦æ›´æ–°ä¸ºæ–°æ¶æ„çš„è·¯å¾„

**å»ºè®®**: æ›´æ–°æ–‡æ¡£ä¸­çš„è·¯å¾„å¼•ç”¨

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹éªŒè¯

### æµç¨‹1: æ„å»º + çƒ­æ›´æ–°ï¼ˆæ–°æ¶æ„ï¼‰

```bash
# 1. æ„å»º Android é¡¹ç›®
node scripts/hotupdate/build/android.js --channel test

# 2. åå¤„ç†ï¼ˆä¿®æ”¹å›¾æ ‡ã€åŒ…åç­‰ï¼‰
node scripts/hotupdate/post/android.js --channel test

# 3. ç”Ÿæˆ APK
node scripts/hotupdate/build/apk.js --channel test

# 4. æ„å»ºçƒ­æ›´æ–°åŒ…ï¼ˆä½¿ç”¨æ–°çš„è¾“å‡ºè·¯å¾„ï¼‰
node scripts/hotupdate/build-all-bundles.js \
  --source build/android-test/assets
```

### æµç¨‹2: æ„å»º + çƒ­æ›´æ–°ï¼ˆå…¼å®¹æ—§æ–¹å¼ï¼‰

```bash
# 1. æ„å»º Android é¡¹ç›®ï¼ˆè¾“å‡ºåˆ° build/android-test/ï¼‰
node scripts/hotupdate/build/android.js --channel test

# 2. æ„å»ºçƒ­æ›´æ–°åŒ…ï¼ˆä½¿ç”¨æ–°è·¯å¾„ï¼‰
node scripts/hotupdate/build-all-bundles.js \
  --source build/android-test/assets
```

## âœ… æ€»ç»“

1. **çƒ­æ›´æ–°è„šæœ¬**: âœ… å®Œå…¨å…¼å®¹ï¼Œæ— éœ€ä¿®æ”¹
2. **æ„å»ºè„šæœ¬**: âœ… å…¼å®¹ï¼Œè¾“å‡ºè·¯å¾„å˜åŒ–ä½†å¯é€šè¿‡å‚æ•°é€‚é…
3. **é…ç½®è¯»å–**: âš ï¸ éœ€è¦ç»Ÿä¸€ç‰ˆæœ¬å·è¯»å–å‡½æ•°
4. **æ–‡æ¡£**: âš ï¸ éœ€è¦æ›´æ–°è·¯å¾„å¼•ç”¨

## ğŸ”„ å»ºè®®çš„ä¿®å¤

1. ç»Ÿä¸€ç‰ˆæœ¬å·è¯»å–ï¼šæ‰€æœ‰è„šæœ¬éƒ½ä½¿ç”¨ `read-config.js` ä¸­çš„å‡½æ•°
2. æ›´æ–°æ–‡æ¡£ï¼šæ›´æ–° `BUILD_WORKFLOW.md` ä¸­çš„è·¯å¾„å¼•ç”¨
3. æ·»åŠ å…¼å®¹æ€§è¯´æ˜ï¼šåœ¨æ–‡æ¡£ä¸­è¯´æ˜æ–°æ—§è·¯å¾„çš„å¯¹åº”å…³ç³»

